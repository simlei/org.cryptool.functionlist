# Overview

The CrypTool Functionlist project, short "flist", is embodied by a command line program where the main mode of operation is to just run it without command line parameters. It performs a sequence of steps. When command line parameters are specified, they are interpreted as the sequence of step names. Otherwise, a preconfigured sequence of steps is performed.

In the following, it is assumed the user is in the root directory of the project (i.e. `src` and `ws-static` are the sub-folders of the current working directory). Paths that start with `./` are relative to the project root.

The main program is the file `./src/flistapp.py`. It performs a sequence of steps. Their input and output are files in the directory `./ws`, the "workspace". The workspace is set up fresh like this: 

``` bash
    ./src/flistapp.py --initws
```

This essentially re-creates the `./ws` directory (double-check that all files changed in there can be overwritten!) and populates it with the contents of `./ws-static`. It is however performed automatically, when no "ws" directory is already present.

The steps are configured by the file `./config.yaml`. The default sequence of steps, as well as all the arguments to the single steps are configurable. A line of configuration may be disabled (ignored by the program) by prefixing it with a `#` character; however, one should take care to not disable the input to an active step.

Please refer to [Config and Data](config_data.html) for a closer look at the single steps and their configuration. Depending on the reader's expertise, it might be possible to skip that document entirely and intuit first steps by just using the config file. As an example, the step "merge_en" is configured as follows in the `./config.yaml`.

```
step.merge_de:
  input: 
    - ${workspace}/data/de/scsv_webdump/ct1.csv
    - ${workspace}/data/de/scsv_webdump/cto.csv
    - ${workspace}/scsv_ct2_de.csv
    - ${workspace}/scsv_jct_de.csv
  output: ${workspace}/all_merged_de.csv
```

Every step follows this general scheme: receive input (mostly files), write output to file. All inputs and outputs are in the `./ws` folder, enabling an in-depth view of what happened in the sequence of steps by just inspecting these files.

## Data sources

Some of the data sources provided to the steps in `./ws` are generated by external tools, others are incrementally updated to accommodate changes in the respective tools. Generated data sources are:

- CT2 generates the file configured as `step.CT2scsv_en_ct2.input` and `step.CT2scsv_de_ct2.input`
- JCT generates the file configured as `step.CT2scsv_en_jct.input` and `step.CT2scsv_de_jct.input`
- CT1 and CTO do not generate files; their functionality records are managed through their respective `step.CT2scsv_{en,de}_ct{1,o}.input` files

Additional manual information may be required when the tools update their functionality. For JCT and CT2, these are mainly assignments of functionality categories and clustering of functionality paths into groups. This is explained in more detail in [Workflows](workflows.html). The CSV schema of the single files is shown in [Steps Config and Data](config_data.html)

CT2 and JCT offer a command-line facility to generate their input files:

```
> CrypWin.exe -GenerateFunctionList
# Both english, german and russian .csv files are generated in the current working directory

> JCrypTool.exe -nl en -GenerateFunctionList [<path-to-english-output.csv>]
> JCrypTool.exe -nl de -GenerateFunctionList [<path-to-german-output.csv>]
# without a path, or with relative paths, the files are generated into the ~/Documents/.jcryptool directory
```

These files have to be put into the configured input locations in `./config.yaml`
